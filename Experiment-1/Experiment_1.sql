CREATE TABLE book_s(
	book_Id INT PRIMARY KEY,
	book_name VARCHAR(20) NOT NULL,
	author_name VARCHAR(20) NOT NULL
)

ALTER TABLE book_s
ADD BOOK_COUNT INT CHECK(BOOK_COUNT>0) NOT NULL

SELECT * FROM book_s

INSERT INTO book_s VALUES(101, 'Harry Potter', 'JK Rowling', 3)
INSERT INTO book_s VALUES(102, '1984', 'George Orwell', 5)

SELECT * FROM book_s

CREATE TABLE LIBRARY_VISITOR_S(
	USER_ID INT PRIMARY KEY,
	NAME VARCHAR(20) NOT NULL,
	AGE INT CHECK(AGE>=17) NOT NULL,
	EMAIL VARCHAR(20) NOT NULL UNIQUE
)

SELECT * FROM LIBRARY_VISITOR_S

INSERT INTO LIBRARY_VISITOR_S(USER_ID, NAME, AGE, EMAIL)
VALUES(101, 'Vansh Sharma', 18, 'vansh12@gmail.com')

CREATE TABLE BOOK_ISSUE_S(
	BOOK_ISSUE_ID INT PRIMARY KEY,
	USER_ID INT NOT NULL,
	BOOK_ID INT NOT NULL,
	FOREIGN KEY(USER_ID) REFERENCES LIBRARY_VISITOR_S(USER_ID),
	FOREIGN KEY(BOOK_ID) REFERENCES book_s(BOOK_ID)
)

ALTER TABLE BOOK_ISSUE_S
ADD ISSUE_DATE DATE

SELECT * FROM BOOK_ISSUE_S

INSERT INTO BOOK_ISSUE_S VALUES(1001, 501, 101, '2026-01-09')

CREATE ROLE Lib
WITH LOGIN PASSWORD 'aditya1234'

SELECT CURRENT_USER

GRANT SELECT, INSERT, DELETE, UPDATE ON BOOKS TO Lib
GRANT SELECT, INSERT, DELETE, UPDATE ON BOOK_ISSUE TO Lib
GRANT SELECT, INSERT, DELETE, UPDATE ON LIBRARY_VISITORS TO Lib


REVOKE SELECT, INSERT, DELETE, UPDATE ON BOOKS, BOOK_ISSUE, LIBRARY_VISITORS FROM Lib
